[project]
name = "naagin"
requires-python = "~=3.13.0"
dynamic = ["version"]

[tool.mypy]
cache_dir = "$MYPY_CONFIG_FILE_DIR/.cache/mypy"
mypy_path = "$MYPY_CONFIG_FILE_DIR/src"
plugins = ["pydantic.mypy"]

[[tool.mypy.overrides]]
module = ["aiopath"]
follow_untyped_imports = true

[tool.ruff]
cache-dir = ".cache/ruff"
src = ["src/naagin"]
line-length = 120

[tool.ruff.lint]
preview = true
explicit-preview-rules = true
select = ["ALL"]
extend-select = ["PLC0415"]
ignore = [
    "A",       # flake8-builtins *
    "COM812",  # flake8-commas   missing-trailing-comma
    "D1",      # pydocstyle      undocumented-*
    "D203",    # pydocstyle      incorrect-blank-line-before-class
    "D212",    # pydocstyle      multi-line-summary-first-line
    "ERA001",  # eradicate       commented-out-code
    "PLC0414", # Convention      useless-import-alias
    "RET505",  # flake8-return   superfluous-else-return
]

[tool.ruff.lint.isort]
force-single-line = true

[tool.ruff.lint.flake8-bugbear]
extend-immutable-calls = ["fastapi.Depends", "fastapi.datastructures.Default"]

[tool.ruff.lint.flake8-boolean-trap]
extend-allowed-calls = ["fastapi.datastructures.Default"]

[tool.ruff.lint.flake8-tidy-imports.banned-api]
"sqlalchemy.orm.DeclarativeBase".msg = "Use naagin.schemas.base.CustomBaseSchema instead."
"pydantic.BaseModel".msg = "Use naagin.base.models.CustomBaseModel instead."
"pydantic_settings.BaseSettings".msg = "Use naagin.settings.base.CustomBaseSettings instead."

[tool.ruff.format]
skip-magic-trailing-comma = true
